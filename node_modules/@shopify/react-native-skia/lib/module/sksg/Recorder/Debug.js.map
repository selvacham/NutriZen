{"version":3,"names":["CommandType","isGroup","CommandTypeNames","Group","SavePaint","RestorePaint","SaveCTM","RestoreCTM","PushColorFilter","PushBlurMaskFilter","PushImageFilter","PushPathEffect","PushShader","ComposeColorFilter","ComposeImageFilter","ComposePathEffect","MaterializePaint","SaveBackdropFilter","SaveLayer","RestorePaintDeclaration","DrawBox","DrawImage","DrawCircle","DrawPaint","DrawPoints","DrawPath","DrawRect","DrawRRect","DrawOval","DrawLine","DrawPatch","DrawVertices","DrawDiffRect","DrawText","DrawTextPath","DrawTextBlob","DrawGlyphs","DrawPicture","DrawImageSVG","DrawParagraph","DrawAtlas","DrawSkottie","serializeProps","props","JSON","stringify","key","value","undefined","toString","e","debugTree","commands","indent","result","prefix","repeat","forEach","cmd","index","type","children","length"],"sources":["Debug.ts"],"sourcesContent":["import { CommandType, isGroup } from \"./Core\";\nimport type { Command } from \"./Core\";\n\nconst CommandTypeNames: Record<CommandType, string> = {\n  [CommandType.Group]: \"Group\",\n  [CommandType.SavePaint]: \"SavePaint\",\n  [CommandType.RestorePaint]: \"RestorePaint\",\n  [CommandType.SaveCTM]: \"SaveCTM\",\n  [CommandType.RestoreCTM]: \"RestoreCTM\",\n  [CommandType.PushColorFilter]: \"PushColorFilter\",\n  [CommandType.PushBlurMaskFilter]: \"PushBlurMaskFilter\",\n  [CommandType.PushImageFilter]: \"PushImageFilter\",\n  [CommandType.PushPathEffect]: \"PushPathEffect\",\n  [CommandType.PushShader]: \"PushShader\",\n  [CommandType.ComposeColorFilter]: \"ComposeColorFilter\",\n  [CommandType.ComposeImageFilter]: \"ComposeImageFilter\",\n  [CommandType.ComposePathEffect]: \"ComposePathEffect\",\n  [CommandType.MaterializePaint]: \"MaterializePaint\",\n  [CommandType.SaveBackdropFilter]: \"SaveBackdropFilter\",\n  [CommandType.SaveLayer]: \"SaveLayer\",\n  [CommandType.RestorePaintDeclaration]: \"RestorePaintDeclaration\",\n  [CommandType.DrawBox]: \"DrawBox\",\n  [CommandType.DrawImage]: \"DrawImage\",\n  [CommandType.DrawCircle]: \"DrawCircle\",\n  [CommandType.DrawPaint]: \"DrawPaint\",\n  [CommandType.DrawPoints]: \"DrawPoints\",\n  [CommandType.DrawPath]: \"DrawPath\",\n  [CommandType.DrawRect]: \"DrawRect\",\n  [CommandType.DrawRRect]: \"DrawRRect\",\n  [CommandType.DrawOval]: \"DrawOval\",\n  [CommandType.DrawLine]: \"DrawLine\",\n  [CommandType.DrawPatch]: \"DrawPatch\",\n  [CommandType.DrawVertices]: \"DrawVertices\",\n  [CommandType.DrawDiffRect]: \"DrawDiffRect\",\n  [CommandType.DrawText]: \"DrawText\",\n  [CommandType.DrawTextPath]: \"DrawTextPath\",\n  [CommandType.DrawTextBlob]: \"DrawTextBlob\",\n  [CommandType.DrawGlyphs]: \"DrawGlyphs\",\n  [CommandType.DrawPicture]: \"DrawPicture\",\n  [CommandType.DrawImageSVG]: \"DrawImageSVG\",\n  [CommandType.DrawParagraph]: \"DrawParagraph\",\n  [CommandType.DrawAtlas]: \"DrawAtlas\",\n  [CommandType.DrawSkottie]: \"DrawSkottie\",\n};\n\nconst serializeProps = (props: unknown): string => {\n  try {\n    return JSON.stringify(props, (key, value) => {\n      if (key === \"children\") {\n        return undefined;\n      }\n      if (typeof value === \"bigint\") {\n        return value.toString();\n      }\n      return value;\n    });\n  } catch (e) {\n    return `\"Error serializing props: ${e}\"`;\n  }\n};\n\nexport const debugTree = (commands: Command[], indent = 0): string => {\n  let result = \"[\\n\";\n  const prefix = \" \".repeat(indent + 2);\n\n  commands.forEach((cmd, index) => {\n    const type = CommandTypeNames[cmd.type] || \"Unknown\";\n    result += `${prefix}{ \"type\": \"${type}\"`;\n\n    if (\"props\" in cmd) {\n      result += `, \"props\": ${serializeProps(cmd.props)}`;\n    }\n\n    if (isGroup(cmd)) {\n      result += `, \"children\": ${debugTree(cmd.children, indent + 2)}`;\n    }\n\n    result += \" }\";\n    if (index < commands.length - 1) {\n      result += \",\";\n    }\n    result += \"\\n\";\n  });\n\n  result += \" \".repeat(indent) + \"]\";\n  return result;\n};\n"],"mappings":"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","ignoreList":[]}