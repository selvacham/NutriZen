{"version":3,"names":["NodeType","isImageFilter","isShader","sortNodeChildren","processPaint","opacity","color","strokeWidth","blendMode","style","strokeJoin","strokeCap","strokeMiter","antiAlias","dither","paint","paintRef","undefined","processCTM","clip","invertClip","transform","origin","matrix","layer","ctm","pushColorFilters","recorder","colorFilters","forEach","colorFilter","children","length","pushColorFilter","type","props","needsComposition","LerpColorFilter","composeColorFilter","pushPathEffects","pathEffects","pathEffect","pushPathEffect","SumPathEffect","composePathEffect","pushImageFilters","imageFilters","imageFilter","pushImageFilter","pushShader","BlendImageFilter","composeImageFilter","pushShaders","shaders","shader","pushMaskFilters","maskFilters","pushBlurMaskFilter","pushPaints","paints","savePaint","restorePaintDeclaration","getStackingContextProps","zIndex","visitNode","node","stackingContextProps","saveGroup","drawings","shouldPushPaint","BackdropFilter","saveBackdropFilter","materializePaint","Layer","saveLayer","shouldRestore","saveCTM","Box","shadows","filter","n","BoxShadow","map","drawBox","Fill","drawPaint","Image","drawImage","Circle","drawCircle","Points","drawPoints","Path","drawPath","Rect","drawRect","RRect","drawRRect","Oval","drawOval","Line","drawLine","Patch","drawPatch","Vertices","drawVertices","DiffRect","drawDiffRect","Text","drawText","TextPath","drawTextPath","TextBlob","drawTextBlob","Glyphs","drawGlyphs","Picture","drawPicture","ImageSVG","drawImageSVG","Paragraph","drawParagraph","Skottie","drawSkottie","Atlas","drawAtlas","drawing","restorePaint","restoreCTM","restoreGroup","visit","root"],"sources":["Visitor.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport type {\n  CTMProps,\n  DrawingNodeProps,\n  BoxShadowProps,\n} from \"../../dom/types\";\nimport { NodeType } from \"../../dom/types\";\nimport type { BaseRecorder } from \"../../skia/types/Recorder\";\nimport type { Node } from \"../Node\";\nimport { isImageFilter, isShader, sortNodeChildren } from \"../Node\";\nimport type { AnimatedProps } from \"../../renderer\";\n\nexport const processPaint = ({\n  opacity,\n  color,\n  strokeWidth,\n  blendMode,\n  style,\n  strokeJoin,\n  strokeCap,\n  strokeMiter,\n  antiAlias,\n  dither,\n  paint: paintRef,\n}: DrawingNodeProps) => {\n  const paint: DrawingNodeProps = {};\n  if (opacity !== undefined) {\n    paint.opacity = opacity;\n  }\n  if (color !== undefined) {\n    paint.color = color;\n  }\n  if (strokeWidth !== undefined) {\n    paint.strokeWidth = strokeWidth;\n  }\n  if (blendMode !== undefined) {\n    paint.blendMode = blendMode;\n  }\n  if (style !== undefined) {\n    paint.style = style;\n  }\n  if (strokeJoin !== undefined) {\n    paint.strokeJoin = strokeJoin;\n  }\n  if (strokeCap !== undefined) {\n    paint.strokeCap = strokeCap;\n  }\n  if (strokeMiter !== undefined) {\n    paint.strokeMiter = strokeMiter;\n  }\n  if (antiAlias !== undefined) {\n    paint.antiAlias = antiAlias;\n  }\n  if (dither !== undefined) {\n    paint.dither = dither;\n  }\n\n  if (paintRef !== undefined) {\n    paint.paint = paintRef;\n  }\n\n  if (\n    opacity !== undefined ||\n    color !== undefined ||\n    strokeWidth !== undefined ||\n    blendMode !== undefined ||\n    style !== undefined ||\n    strokeJoin !== undefined ||\n    strokeCap !== undefined ||\n    strokeMiter !== undefined ||\n    antiAlias !== undefined ||\n    dither !== undefined ||\n    paintRef !== undefined\n  ) {\n    return paint;\n  }\n  return null;\n};\n\nconst processCTM = ({\n  clip,\n  invertClip,\n  transform,\n  origin,\n  matrix,\n  layer,\n}: CTMProps) => {\n  const ctm: CTMProps = {};\n  if (clip) {\n    ctm.clip = clip;\n  }\n  if (invertClip) {\n    ctm.invertClip = invertClip;\n  }\n  if (transform) {\n    ctm.transform = transform;\n  }\n  if (origin) {\n    ctm.origin = origin;\n  }\n  if (matrix) {\n    ctm.matrix = matrix;\n  }\n  if (layer) {\n    ctm.layer = layer;\n  }\n  if (\n    clip !== undefined ||\n    invertClip !== undefined ||\n    transform !== undefined ||\n    origin !== undefined ||\n    matrix !== undefined ||\n    layer !== undefined\n  ) {\n    return ctm;\n  }\n  return null;\n};\n\nconst pushColorFilters = (\n  recorder: BaseRecorder,\n  colorFilters: Node<any>[]\n) => {\n  colorFilters.forEach((colorFilter) => {\n    if (colorFilter.children.length > 0) {\n      pushColorFilters(recorder, colorFilter.children);\n    }\n    recorder.pushColorFilter(colorFilter.type, colorFilter.props);\n    const needsComposition =\n      colorFilter.type !== NodeType.LerpColorFilter &&\n      colorFilter.children.length > 0;\n    if (needsComposition) {\n      recorder.composeColorFilter();\n    }\n  });\n};\n\nconst pushPathEffects = (recorder: BaseRecorder, pathEffects: Node<any>[]) => {\n  pathEffects.forEach((pathEffect) => {\n    if (pathEffect.children.length > 0) {\n      pushPathEffects(recorder, pathEffect.children);\n    }\n    recorder.pushPathEffect(pathEffect.type, pathEffect.props);\n    const needsComposition =\n      pathEffect.type !== NodeType.SumPathEffect &&\n      pathEffect.children.length > 0;\n    if (needsComposition) {\n      recorder.composePathEffect();\n    }\n  });\n};\n\nconst pushImageFilters = (\n  recorder: BaseRecorder,\n  imageFilters: Node<any>[]\n) => {\n  imageFilters.forEach((imageFilter) => {\n    if (imageFilter.children.length > 0) {\n      pushImageFilters(recorder, imageFilter.children);\n    }\n    if (isImageFilter(imageFilter.type)) {\n      recorder.pushImageFilter(imageFilter.type, imageFilter.props);\n    } else if (isShader(imageFilter.type)) {\n      recorder.pushShader(imageFilter.type, imageFilter.props, 0);\n    }\n    const needsComposition =\n      imageFilter.type !== NodeType.BlendImageFilter &&\n      imageFilter.children.length > 0;\n    if (needsComposition) {\n      recorder.composeImageFilter();\n    }\n  });\n};\n\nconst pushShaders = (recorder: BaseRecorder, shaders: Node<any>[]) => {\n  shaders.forEach((shader) => {\n    if (shader.children.length > 0) {\n      pushShaders(recorder, shader.children);\n    }\n    recorder.pushShader(shader.type, shader.props, shader.children.length);\n  });\n};\n\nconst pushMaskFilters = (recorder: BaseRecorder, maskFilters: Node<any>[]) => {\n  if (maskFilters.length > 0) {\n    recorder.pushBlurMaskFilter(maskFilters[maskFilters.length - 1].props);\n  }\n};\n\nconst pushPaints = (recorder: BaseRecorder, paints: Node<any>[]) => {\n  paints.forEach((paint) => {\n    recorder.savePaint(paint.props, true);\n    const { colorFilters, maskFilters, shaders, imageFilters, pathEffects } =\n      sortNodeChildren(paint);\n    pushColorFilters(recorder, colorFilters);\n    pushImageFilters(recorder, imageFilters);\n    pushMaskFilters(recorder, maskFilters);\n    pushShaders(recorder, shaders);\n    pushPathEffects(recorder, pathEffects);\n    recorder.restorePaintDeclaration();\n  });\n};\n\ntype StackingContextProps = Pick<DrawingNodeProps, \"zIndex\">;\n\nconst getStackingContextProps = (\n  props: AnimatedProps<DrawingNodeProps>\n): AnimatedProps<StackingContextProps> | undefined => {\n  const { zIndex } = props;\n  if (zIndex === undefined) {\n    return undefined;\n  }\n  return { zIndex };\n};\n\nconst visitNode = (recorder: BaseRecorder, node: Node<any>) => {\n  const { props } = node;\n  const stackingContextProps = getStackingContextProps(\n    props as AnimatedProps<DrawingNodeProps>\n  );\n  recorder.saveGroup(stackingContextProps);\n  const {\n    colorFilters,\n    maskFilters,\n    drawings,\n    shaders,\n    imageFilters,\n    pathEffects,\n    paints,\n  } = sortNodeChildren(node);\n  const paint = processPaint(props);\n  const shouldPushPaint =\n    paint ||\n    colorFilters.length > 0 ||\n    maskFilters.length > 0 ||\n    imageFilters.length > 0 ||\n    pathEffects.length > 0 ||\n    shaders.length > 0;\n  if (shouldPushPaint) {\n    recorder.savePaint(paint ?? {}, false);\n    pushColorFilters(recorder, colorFilters);\n    pushImageFilters(recorder, imageFilters);\n    pushMaskFilters(recorder, maskFilters);\n    pushShaders(recorder, shaders);\n    pushPathEffects(recorder, pathEffects);\n    // For mixed nodes like BackdropFilters we don't materialize the paint\n    if (node.type === NodeType.BackdropFilter) {\n      recorder.saveBackdropFilter();\n    } else {\n      recorder.materializePaint();\n    }\n  }\n  pushPaints(recorder, paints);\n  if (node.type === NodeType.Layer) {\n    recorder.saveLayer();\n  }\n  const ctm = processCTM(props);\n  const shouldRestore = !!ctm || node.type === NodeType.Layer;\n  if (ctm) {\n    recorder.saveCTM(ctm);\n  }\n  switch (node.type) {\n    case NodeType.Box:\n      const shadows = node.children\n        .filter((n) => n.type === NodeType.BoxShadow)\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        .map(({ props }) => ({ props }) as { props: BoxShadowProps });\n      recorder.drawBox(props, shadows);\n      break;\n    case NodeType.Fill:\n      recorder.drawPaint();\n      break;\n    case NodeType.Image:\n      recorder.drawImage(props);\n      break;\n    case NodeType.Circle:\n      recorder.drawCircle(props);\n      break;\n    case NodeType.Points:\n      recorder.drawPoints(props);\n      break;\n    case NodeType.Path:\n      recorder.drawPath(props);\n      break;\n    case NodeType.Rect:\n      recorder.drawRect(props);\n      break;\n    case NodeType.RRect:\n      recorder.drawRRect(props);\n      break;\n    case NodeType.Oval:\n      recorder.drawOval(props);\n      break;\n    case NodeType.Line:\n      recorder.drawLine(props);\n      break;\n    case NodeType.Patch:\n      recorder.drawPatch(props);\n      break;\n    case NodeType.Vertices:\n      recorder.drawVertices(props);\n      break;\n    case NodeType.DiffRect:\n      recorder.drawDiffRect(props);\n      break;\n    case NodeType.Text:\n      recorder.drawText(props);\n      break;\n    case NodeType.TextPath:\n      recorder.drawTextPath(props);\n      break;\n    case NodeType.TextBlob:\n      recorder.drawTextBlob(props);\n      break;\n    case NodeType.Glyphs:\n      recorder.drawGlyphs(props);\n      break;\n    case NodeType.Picture:\n      recorder.drawPicture(props);\n      break;\n    case NodeType.ImageSVG:\n      recorder.drawImageSVG(props);\n      break;\n    case NodeType.Paragraph:\n      recorder.drawParagraph(props);\n      break;\n    case NodeType.Skottie:\n      recorder.drawSkottie(props);\n      break;\n    case NodeType.Atlas:\n      recorder.drawAtlas(props);\n      break;\n  }\n  drawings.forEach((drawing) => {\n    visitNode(recorder, drawing);\n  });\n  if (shouldPushPaint) {\n    recorder.restorePaint();\n  }\n  if (shouldRestore) {\n    recorder.restoreCTM();\n  }\n  recorder.restoreGroup();\n};\n\nexport const visit = (recorder: BaseRecorder, root: Node[]) => {\n  root.forEach((node) => {\n    visitNode(recorder, node);\n  });\n};\n"],"mappings":"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","ignoreList":[]}